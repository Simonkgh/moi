<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Mine of Information - Yubikey, FIDO2 and Backups</title>
    <link rel="stylesheet" type="text/css" href="/assets/css/coderay.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/stylesheet.css">
    <link type="application/atom+xml" title="Mine of Information" rel="alternate" href="/atom.xml"> 

    <meta name="generator" content="nanoc 4.12.15"> 
    <meta name="author" content="Simon Kitching"> 
  </head>
  <body>
    <section id="header">
      <span class='title'>The Mine of Information</span> <span class='desc'>(Nuggets of Programming and Linux)</span>
    </section>
    <div id="main">
      <section id='navpane'>
        <section>
  <ul id="navicons">
      <li class="nav">
      <a href="/" title="Home"><img src="/assets/images/Home.png"></a>
      <a href="/archives/" title="Archives"><img src="/assets/images/Calendar.png"></a>
      <a href="/site/welcome" title="E-Mail"><img src="/assets/images/Envelope.png"></a>
      <a href="/atom.xml" title="Subscribe Feed"><img src="/assets/images/RSS.png"></a>
      </li>
  </ul>
</section>

<section>
  <h1>About</h1>
  <ul id="about">
    <li>
      <a href="/site/welcome">Welcome</a>
    </li>
  </ul>
</section>

<section>
<h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2023/12/monorepos/">Monorepos and Polyrepos</a>
      </li>
    
      <li class="post">
        <a href="/2023/12/httpapis/">HTTP APIs, REST APIs, and Others</a>
      </li>
    
      <li class="post">
        <a href="/2023/09/biden/">Biden on Democracy</a>
      </li>
    
      <li class="post">
        <a href="/2023/09/tech-breadth/">Maintaining Technical Depth</a>
      </li>
    
      <li class="post">
        <a href="/2023/08/vpns/">The Uselessness of Consumer VPNs</a>
      </li>
    
      <li class="post">
        <a href="/2023/06/microservices/">Some Aspects of Implementing Microservices..</a>
      </li>
    
      <li class="post">
        <a href="/2023/06/dtest-evolution-scrum-monad/">DDD, Architecture patterns, and More..</a>
      </li>
    
      <li class="post">
        <a href="/2023/05/testing/">Should Unit Tests Verify Requirements Only?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Categories</h1>
  <ul id="categories">
    
      <li class="catlink">
        <a href='/category/Architecture/'>Architecture</a>
      </li>
    
      <li class="catlink">
        <a href='/category/BigData/'>BigData</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Cloud/'>Cloud</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Cryptography/'>Cryptography</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Git/'>Git</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Infrastructure/'>Infrastructure</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Java/'>Java</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Links/'>Links</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Linux/'>Linux</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Network/'>Network</a>
      </li>
    
      <li class="catlink">
        <a href='/category/OSGi/'>OSGi</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Off-topic/'>Off-topic</a>
      </li>
    
      <li class="catlink">
        <a href='/category/OpenWRT/'>OpenWRT</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Programming/'>Programming</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Security/'>Security</a>
      </li>
    
      <li class="catlink">
        <a href='/category/Site/'>Site</a>
      </li>
    
  </ul>
</section>


      </section>
  
      <section id='content'>
        
  <div class='post'>
    <h1>Yubikey, FIDO2 and Backups</h1>
    <aside>Posted on: October 3, 2018</aside>
    <article>
    <p>Categories: <a href='/category/Security/'>Security</a></p>
      
<p>As I wrote in my <a href="/security/yubikey">recent look at the Yubikey</a>, it seemed to me that the rather primitive approach to backups taken by the Yubikey so far was just not going to be sufficient for the FIDO2/WebAuthn world, where the number of distinct credentials is going to be far larger.</p>

<p>Now that the Yubikey5 is out, with support for FIDO2/WebAuthn, I checked their documentation again - but couldn’t find any updated recommendations. As there is no apparent customer forum, I filed a support ticket asking about this. Unfortunately, the response was disappointing.</p>

<!-- more -->
<p>Here’s my request:</p>

<blockquote>
  <p>I would like more information on the options for “backing up” credentials for FIDO2 and U2F from a Yubikey5. All information/recommendations that I can find online suggest “a second key”; this approach works moderately well when the key holds few credentials, but is simply unuseable when using FIDO2 for per-website authentication, where dozens of credentials may be created. Registering twice for each site, and permanently having the “backup” device available in order to do so is not a reasonable solution. Do you have a better solution documented anywhere?</p>

  <p>One option I would suggest is to support exporting credentials from the Yubikey - encrypted by an OpenPGP public key registered on the Yubikey device. This would allow safe backups to be made without exposing internal credentials. Does such a feature exist, or is such a feature planned?</p>
</blockquote>

<p>And sadly, here is the response:</p>

<blockquote>
  <p>Thanks for reaching out.</p>

  <p>You can’t export FIDO credentials because of security reasons. Such does not exist, or  is planned.
That’s what makes FIDO so secure, nobody can export FIDO credentials even if they take your Yubikey from you or you loose it.
The only thing you can do on the Yubikey 5 is to reset the FIDO credentials.
What you can do is to add a backup key to each account in case you loose the first Yubikey.</p>

  <p>(name removed)
Support Engineer | Yubico</p>
</blockquote>

<p>As I (hopefully) clearly explained in the request, I just don’t see “use a second key” as a practical solution.</p>

<p>It works if you just sign up to accounts on 2 different services, and then never open any other accounts - ie if all you ever need is Facebook and Google, it might be sufficient. You sign up, then dig out your backup device from its secure storage (eg at a friends house, or from the safe at your bank) and register it with these other accounts too, then put the backup device safely away again.</p>

<p>But one of the great features of FIDO2 is that there is no need for using “log in with Facebook/Google/etc”; you can easily create a completely new and independent credential for each site you sign up to. And if you are using this to create new credentials on a regular basis, then you’ll need to keep a log of which new accounts you have created since the last “backup preparation session” then every few weeks retrieve your backup device from its safe location and revisit all those sites to add the backup device to them. Sounds like a real pain in the <code>***</code> to me. Having your backup device available at all times is just stupid for obvious reasons; ideally the primary and backup devices should never ever be in the same location.</p>

<p>And if you do lose the primary, and have to resort to using the backup - how do you create a new backup? You would need to somehow determine which sites you have registered with, and revisit each of them one by one to register a new key.</p>

<p>I thought my proposal was a good one - load a public key into the Yubikey, then have a way for the Yubikey to export its internal FIDO2 credentials encrypted by that key. You can make such a backup at any time (eg after creating a new login), and put the resulting file on the internet if you wish - it is encrypted and is perfectly unreadable without the private part of that key. That private key should of course be stored somewhere safe - like on the backup Yubikey. Or just on a USB stick stored somewhere secure. Of course it should not be possible to <em>overwrite</em> that public key with which credentials are exported (or at least, credentials should only be exported via the public key active when they were created).</p>

<p>I guess time will tell whether Yubico’s FIDO2/WebAuthn feature will be a success without reasonable backup. However for me, I’ll wait for the next <a href="https://cloud.google.com/titan-security-key/">Google Titan</a> or <a href="https://www.nitrokey.com/">Nitrokey</a> and see if they have a better solution.</p>

<p>Or maybe there’s a good solution I haven’t thought of? If so, let me know!</p>

    </article>
  </div>
    



      </section>
    </div>
    <section id="footer">
      <p>Copyright &copy; 2025 - Simon Kitching</p>
    </section>
  </body>
</html>

